<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="UTF-8" />
  <title>Computación Heterogénea</title>
  <meta name="description" content="Programming Heterogeneous Arquitectures using Data Parallel C&#43;&#43;" />
  <meta name="author" content="Joel Fuentes" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <meta name="generator" content="kitab theme by Darshan in Hugo 0.96.0" />

  <link
    rel="stylesheet"
    href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
    integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
    crossorigin="anonymous"
  />
  <link
    href="https://fonts.googleapis.com/css?family=Roboto&display=swap"
    rel="stylesheet"
  />
  <link
    rel="stylesheet"
    href="https://use.fontawesome.com/releases/v5.8.2/css/all.css"
    integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay"
    crossorigin="anonymous"
  />
  <link rel="stylesheet" href="/~jfuentes/classes/ch/css/kitab.css" />

  <script src="/~jfuentes/classes/ch/js/myFunctions.js"></script>
  <script src="/~jfuentes/classes/ch/js/clipboard.min.js"></script>

  
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>

  <body class="container" style="max-width: 1024px;">
    <nav class="mt-2 border-bottom">
  <div class="d-flex flex-row position-relative">
    <a href="/~jfuentes/classes/ch/"
      ><i title="Home" class="nav-menu mr-2 mt-1 fas fa-home"></i
    ></a>
    <div class="position-relative">
  <i
    class="nav-menu hover-menu ml-2 mr-2 mt-1 fas fa-book"
    onclick="expandMenu(this)"
    title="Show all units"
  ></i>
  <div
    class="show bg-light shadow mt-2"
    style="position: absolute;
      min-width: 280px;
      max-width: 75%;
      z-index: 1;
      max-height: 0px;
      overflow: hidden;"
  >
    <div class="p-2">
      <strong>
        Units
      </strong>
      <ul class="list-unstyled ml-1">
        
        <li class="hanging">
          <a href="http://www.face.ubiobio.cl/~jfuentes/classes/ch/unit1/">
            <ol>
<li>Arquitecturas</li>
</ol>

          </a>
          6 sesiones
        </li>
        
        <li class="hanging">
          <a href="http://www.face.ubiobio.cl/~jfuentes/classes/ch/unit2/">
            <ol start="2">
<li>Modelos de Programación</li>
</ol>

          </a>
          10 sesiones
        </li>
        
        <li class="hanging">
          <a href="http://www.face.ubiobio.cl/~jfuentes/classes/ch/unit3/">
            <ol start="3">
<li>Algoritmos</li>
</ol>

          </a>
          6 sesiones
        </li>
        
        <li class="hanging">
          <a href="http://www.face.ubiobio.cl/~jfuentes/classes/ch/unit4/">
            <ol start="4">
<li>Rendimiento</li>
</ol>

          </a>
          3 sesiones
        </li>
        
      </ul>
    </div>
</div>

    
    <div class="position-relative">
  <i
    class="nav-menu hover-menu ml-2 mr-2 mt-1 fas fa-bars"
    onclick="expandMenu(this)"
    title = "Show Sessions"
  ></i>
  <div
    class="show bg-light shadow mt-2"
    style="
      position: absolute;
      min-width: 280px;
      max-width: 75%;
      z-index: 1;
      max-height: 0px;
      overflow: hidden;"
  >
    <div class="p-2 rounded">
      <strong class="mt-3">
        
        
        <ol start="2">
<li>Modelos de Programación</li>
</ol>

        
      </strong>
      <ul class="list-unstyled ml-1">
        
        
        <li class="hanging">
          <a href="http://www.face.ubiobio.cl/~jfuentes/classes/ch/unit2/dpcpp/">DPC++</a>
        </li>
        
        <li class="hanging">
          <a href="http://www.face.ubiobio.cl/~jfuentes/classes/ch/unit2/lab1/">Lab 1</a>
        </li>
        
        <li class="hanging">
          <a href="http://www.face.ubiobio.cl/~jfuentes/classes/ch/unit2/modelos_computo/">Modelos de Cómputo</a>
        </li>
        
        <li class="hanging">
          <a href="http://www.face.ubiobio.cl/~jfuentes/classes/ch/unit2/proyecto/">Proyecto</a>
        </li>
        
        <li class="hanging">
          <a href="http://www.face.ubiobio.cl/~jfuentes/classes/ch/unit2/devcloud/">DevCloud</a>
        </li>
        
        <li class="hanging">
          <a href="http://www.face.ubiobio.cl/~jfuentes/classes/ch/unit2/frameworks/">Frameworks de Programación</a>
        </li>
        
        <li class="hanging">
          <a href="http://www.face.ubiobio.cl/~jfuentes/classes/ch/unit2/oneapi/">Intro a OneAPI y DPC++</a>
        </li>
        
        <li class="hanging">
          <a href="http://www.face.ubiobio.cl/~jfuentes/classes/ch/unit2/evaluacion/">Test 2</a>
        </li>
        
        <li class="hanging">
          <a href="http://www.face.ubiobio.cl/~jfuentes/classes/ch/unit2/gpu/">GPU Computing (charla invitada)</a>
        </li>
        
      </ul>
    </div>
  </div>
</div>

    
  </div>
  
</nav>

    <main class="mt-3" style="margin-left: 32px;">
      
<div class="mb-2 p-3 shadow position-relative">
  <small
    class="bg-white pl-1 pr-1 rounded"
    style="background-color: #f3f3ef !important; position: absolute; top: -0.75em; right: 1em"
  ><div>
  






<span style="font-size: 0.9em;"><i
    aria-label="home"
    class="fas fa-home"
  ></i
  ></span>



<span style="font-size: 0.9em;"> / <ol start="2">
<li>Modelos de …</li></ol></span>



<span style="font-size: 0.9em;"> / Proyecto</span>

</div>


</small>
  <h2>Proyecto</h2>
  <div class="rounded">
    <h2 id="propagación-de-calor-en-metales">Propagación de calor en metales</h2>
<p>La ecuación de Laplace es una ecuación parcial de segundo orden que es usada en muchos problemas en física, incluídos electroestática, flujo de fluídos, temperatura, etc.</p>
<p>En su forma más básica puede ser expresada como:
$$\nabla^2f(x,y)=0 $$</p>
<p>En particular, para resolver problemas de simulación y propagación de temperatura se ha propuesto la iteración de Jacobi. Esta iteración establece que la ecuación de Laplace aplicada en una matriz de puntos, un punto de esta matriz es el promedio de sus vecinos. En consecuencia, se puede converger a un estado  mediante el cómputo iterativo de nuevos valores para cada punto de la matriz usando el promedio de los puntos vecinos. La siguiente imagen muestra el cálculo del promedio de vecinos realizado en cada iteración de Jacobi:</p>
<p align="center">
  <img src="../../images/neighbors.png">
</p>
<p>$$A_{k+1}(i,j)=\frac{A_k(i-1,j)+A_k(i+1,j)+A_k(i,j-1)+A_k(i,j+1)}{4} $$</p>
<p>De esta forma, para calcular el valor \(A(i, j)\) de la iteración \(k+1\), se calcula el promedio del valor de sus vecinos obtenido en la iteracion \(k\).</p>
<p>En este proyecto, usted debe implementar un simulador de propagación de calor en metales. Suponga que existe un metal de ciertas dimensiones al cual se le aplica una fuente de calor en su extremo. Al pasar el tiempo, el calor comienza a propagarse a través del metal hasta alcanzar un estado de estabilización (estado final estable). Este comportamiento puede ser modelado mediante iteraciones de Jacobi y la ecuación de Laplace descritas anteriormente. La siguiente figura muestra un ejemplo gráfico del estado inicial de una placa de metal y el estado final de estabilización con la programación de calor.</p>
<p align="center">
  <img src="../../images/metal.png">
</p>
<p>La placa de metal la podemos modelar computacionalmente mediante una matriz de valores que indiquen la temperatura de cada uno de sus puntos. Sin embargo, el cálculo para realizar la simulación de propagación de calor tomará mucho tiempo de forma secuencial, ya que se deben realizar cientos de iteraciones con el cálculo del promedio de vecinos. Es por esto que se requiere que usted implemente una versión paralela utilizando DPC++.</p>
<p>El cálculo principal a implementar para generar la simulación está dado por el siguiente código secuencial:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Iterar hasta alcanzar un estado de estabilización o número máximo de iteraciones
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">while</span> ( dt <span style="color:#f92672">&gt;</span> MAX_TEMP_ERROR <span style="color:#f92672">&amp;&amp;</span> iteration <span style="color:#f92672">&lt;=</span> max_iterations ) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Cálculo principal:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">// Por cada posición de la matriz calcular el promedio de los vecinos
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">for</span>(i <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>; i <span style="color:#f92672">&lt;=</span> ROWS; i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">for</span>(j <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>; j <span style="color:#f92672">&lt;=</span> COLUMNS; j<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>                Temperature[i][j] <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.25</span> <span style="color:#f92672">*</span> (Temperature_last[i<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>][j] <span style="color:#f92672">+</span> Temperature_last[i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][j] <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>                                            Temperature_last[i][j<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>] <span style="color:#f92672">+</span> Temperature_last[i][j<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        dt <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.0</span>; <span style="color:#75715e">// resetear cambio de temperatura más grande
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Copiar matriz y encontrar el máximo cambio de calor
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">for</span>(i <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>; i <span style="color:#f92672">&lt;=</span> ROWS; i<span style="color:#f92672">++</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">for</span>(j <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>; j <span style="color:#f92672">&lt;=</span> COLUMNS; j<span style="color:#f92672">++</span>){
</span></span><span style="display:flex;"><span>	            dt <span style="color:#f92672">=</span> fmax( fabs(Temperature[i][j]<span style="color:#f92672">-</span>Temperature_last[i][j]), dt);
</span></span><span style="display:flex;"><span>	            Temperature_last[i][j] <span style="color:#f92672">=</span> Temperature[i][j];
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span></code></pre></div><p>El ciclo <em>while</em> controla el término de la iteración de Jacobi, se continuará con iteraciones mientras no se alcance un nivel de estabilidad de calor (<em>dt &gt; MAX_TEMP_ERROR</em>) y el número máximo de iteraciones no se alcance (<em>iteration &lt;= max_iterations</em>). Las estructuras <em>for</em> internas corresponden a cálculos que deben ser paralelizados. El primer <em>for</em> anidado calcula el promedio de vecinos para cada posición de la matriz, y el segundo <em>for</em> anidado copia los nuevos valores calculados entre matrices y encontra el máximo cambio de calor entre la iteración anterior y actual. Notar que al momento de paralelizar la búsqueda del máximo cambio de calor en el segundo <em>for</em> anidado todos los hilos deben actualizar la variable <em>dt</em>, por lo que es necesario utilizar alguna técnica de reducción y/o sincronización.</p>
<p>En su implementación debe utilizar técnicas disponibles en DPC++ para acelerar este procesamiento en Multi-core CPU, GPU o FPGA. Para esto debe considerar los siguientes aspectos:</p>
<ol>
<li>Declaración de buffers para el almacenamiento de datos</li>
<li>Paralelizar el procesamiento mediante el uso de <em>parallel_for</em>, <em>range</em> y <em>nd_range</em></li>
<li>Sincronización en la actualización de datos compartidos por múltiples hilos</li>
</ol>
<h3 id="implementación-y-entrega">Implementación y Entrega</h3>
<ul>
<li>El proyecto puede ser realizado en equipos de a lo más 2 integrantes</li>
<li>La entrega se realiza mediante Github Classroom.</li>
<li>El código inicial incluye una versión secuencial del problema. Usted debe implementar su solución en la función <em>laplace_parallel</em> usando DPC++.</li>
<li>Su implementación debe cumplir dos objetivos:
<ul>
<li>El cálculo de la simulación de temperaturas debe ser correcto</li>
<li>Su implementación debe ser más eficiente en rendimiento que la implementación secuencial. Actualmente el rendimiento es medido contabilizando el tiempo en resolver la simulación</li>
</ul>
</li>
<li>Al evaluar las entregas, se realizará un ranking con las implementaciones más eficientes. Esto será considerado en la calificación final.</li>
<li>Entregas:
<ul>
<li>Primera entrega:
<ul>
<li>Implementación en DPC++ de la simulación funcionando correctamente.</li>
<li><strong>Martes 30 de Noviembre, 11:59 PM.</strong></li>
</ul>
</li>
<li>Entrega final:
<ul>
<li>Implementación en DPC++ de la simulación funcionando correctamente con mejoras en rendimiento.</li>
<li><strong>Jueves 23 de Diciembre, 11:59 PM.</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<p>Referencia: Problema adaptado desde material académico por John Urbanic.</p>

  </div>
</div>

    </main>
    <div class="side-bar">
  
  <p class="mb-1 mt-1 text-left">
  
  <a
    href="/~jfuentes/classes/ch/unit2/devcloud/"
    title="DevCloud"
  >
    <i class="nav-menu fas fa-chevron-circle-right"></i>
  </a>
  
</p>
<p class="mb-1 mt-1 text-left">
  
  <a
    href="/~jfuentes/classes/ch/unit2/modelos_computo/"
    title="Modelos de Cómputo"
  >
    <i class="nav-menu fas fa-chevron-circle-left"></i>
  </a>
  
</p>

  
  <a href="#" class="mb-1 mt-1 text-left">
    <i
      class="nav-menu fas fa-chevron-circle-up"
      aria-label="Scroll to top"
    ></i>
  </a>
  <p class="mb-1 mt-1 text-left">
    <i
      title="Copy URL to share"
      class="nav-menu fas fa-share-alt"
    ></i>
  </p>
</div>

<script>
  function displayCopyMessage(bool) {
    let alertMessage = "";
    if (bool) {
      alertMessage = "Link copied to clipboard";
    } else {
      alertMessage = "Link could not be copied to clipboard";
    }
    let copiedMessage = document.createElement("div");
    copiedMessage.id = "copiedMessage";
    copiedMessage.textContent = alertMessage;
    copiedMessage.classList.add(
      "bg-warning",
      "shadow",
      "d-block",
      "text-center"
    );
    document.body.appendChild(copiedMessage);

    setTimeout(function() {
      copiedMessage.style.opacity = 0;
    }, 500);
    setTimeout(function() {
      document.body.removeChild(copiedMessage);
    }, 1500);
  }

  let clipboard = new ClipboardJS(".fa-share-alt", {
    text: function() {
      return "http:\/\/www.face.ubiobio.cl\/~jfuentes\/classes\/ch\/unit2\/proyecto\/";
    }
  });

  clipboard.on("success", function() {
    displayCopyMessage(true);
  });

  clipboard.on("error", function() {
    displayCopyMessage(false);
  });
</script>

    <footer class="d-flex flex-row flex-wrap justify-content-between">
  <div class="d-flex flex-column">
    <span class="mb-1">
      Universidad del Bío-Bío, Chile
      &middot;
      2021
    </span>
  </div>

    <div class="row">
      <div class="column" style="
      width: 100%;">Patrocinadores:</div>
      <div class="column" style="
      width: 120px;
      margin-left: 65px;"><img src="http://www.face.ubiobio.cl/~jfuentes/classes/ch/images/ici_web.png" height="40%" ></div>
      <div class="column" style="
      width: 120px;
      margin-left: 10px;"><img src="http://www.face.ubiobio.cl/~jfuentes/classes/ch/images/intel_web.png" height="20%" ></div>
    </div> 

  </footer>

  </body>
</html>
