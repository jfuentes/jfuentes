<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="UTF-8" />
  <title>Heterogeneous Computing</title>
  <meta name="description" content="Programming Heterogeneous Arquitectures using Data Parallel C&#43;&#43;" />
  <meta name="author" content="Joel Fuentes" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <meta name="generator" content="kitab theme by Darshan in Hugo 0.87.0" />

  <link
    rel="stylesheet"
    href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
    integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
    crossorigin="anonymous"
  />
  <link
    href="https://fonts.googleapis.com/css?family=Roboto&display=swap"
    rel="stylesheet"
  />
  <link
    rel="stylesheet"
    href="https://use.fontawesome.com/releases/v5.8.2/css/all.css"
    integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay"
    crossorigin="anonymous"
  />
  <link rel="stylesheet" href="/classes/hc/css/kitab.css" />

  <script src="/classes/hc/js/myFunctions.js"></script>
  <script src="/classes/hc/js/clipboard.min.js"></script>

    
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>

  <body class="container" style="max-width: 1024px;">
    <nav class="mt-2 border-bottom">
  <div class="d-flex flex-row position-relative">
    <a href="/classes/hc/"
      ><i title="Home" class="nav-menu mr-2 mt-1 fas fa-home"></i
    ></a>
    <div class="position-relative">
  <i
    class="nav-menu hover-menu ml-2 mr-2 mt-1 fas fa-book"
    onclick="expandMenu(this)"
    title="Show all units"
  ></i>
  <div
    class="show bg-light shadow mt-2"
    style="position: absolute;
      min-width: 280px;
      max-width: 75%;
      z-index: 1;
      max-height: 0px;
      overflow: hidden;"
  >
    <div class="p-2">
      <strong>
        Units
      </strong>
      <ul class="list-unstyled ml-1">
        
        <li class="hanging">
          <a href="https://jfuentes.github.io/classes/hc/unit1/">
            <ol>
<li>Architectures</li>
</ol>

          </a>
          by 6 sessions
        </li>
        
        <li class="hanging">
          <a href="https://jfuentes.github.io/classes/hc/unit2/">
            <ol start="2">
<li>Programming Models</li>
</ol>

          </a>
          by 10 sessions
        </li>
        
        <li class="hanging">
          <a href="https://jfuentes.github.io/classes/hc/unit3/">
            <ol start="3">
<li>Algorithms</li>
</ol>

          </a>
          by 6 sessions
        </li>
        
        <li class="hanging">
          <a href="https://jfuentes.github.io/classes/hc/unit4/">
            <ol start="4">
<li>Performance</li>
</ol>

          </a>
          by 3 sessions
        </li>
        
      </ul>
    </div>
  </div>
</div>

    
    <div class="position-relative">
  <i
    class="nav-menu hover-menu ml-2 mr-2 mt-1 fas fa-bars"
    onclick="expandMenu(this)"
    title = "Show Sessions"
  ></i>
  <div
    class="show bg-light shadow mt-2"
    style="
      position: absolute;
      min-width: 280px;
      max-width: 75%;
      z-index: 1;
      max-height: 0px;
      overflow: hidden;"
  >
    <div class="p-2 rounded">
      <strong class="mt-3">
        
        
        <ol start="2">
<li>Programming Models</li>
</ol>

        
      </strong>
      <ul class="list-unstyled ml-1">
        
        
        <li class="hanging">
          <a href="https://jfuentes.github.io/classes/hc/unit2/compute_models/">Compute Models</a>
        </li>
        
        <li class="hanging">
          <a href="https://jfuentes.github.io/classes/hc/unit2/frameworks/">Programming Frameworks</a>
        </li>
        
        <li class="hanging">
          <a href="https://jfuentes.github.io/classes/hc/unit2/oneapi/">Intro to OneAPI and DPC++</a>
        </li>
        
        <li class="hanging">
          <a href="https://jfuentes.github.io/classes/hc/unit2/gpu/">GPU Computing (invited talk)</a>
        </li>
        
        <li class="hanging">
          <a href="https://jfuentes.github.io/classes/hc/unit2/lab1/">Lab 1</a>
        </li>
        
        <li class="hanging">
          <a href="https://jfuentes.github.io/classes/hc/unit2/project/">Project</a>
        </li>
        
        <li class="hanging">
          <a href="https://jfuentes.github.io/classes/hc/unit2/dpcpp/">DPC++</a>
        </li>
        
        <li class="hanging">
          <a href="https://jfuentes.github.io/classes/hc/unit2/devcloud/">DevCloud</a>
        </li>
        
        <li class="hanging">
          <a href="https://jfuentes.github.io/classes/hc/unit2/evaluation/">Test 2</a>
        </li>
        
      </ul>
    </div>
  </div>
</div>

    
  </div>
</nav>

    <main class="mt-3" style="margin-left: 32px;">
      
<div class="mb-2 p-3 shadow position-relative">
  <small
    class="bg-white pl-1 pr-1 rounded"
    style="background-color: #f3f3ef !important; position: absolute; top: -0.75em; right: 1em"
  ><div>
  






<span style="font-size: 0.9em;"><i
    aria-label="home"
    class="fas fa-home"
  ></i
  ></span>



<span style="font-size: 0.9em;"> / <ol start="2">
<li>Programming …</li></ol></span>



<span style="font-size: 0.9em;"> / DevCloud</span>

</div>


</small>
  <h2>DevCloud</h2>
  <div class="rounded">
    <h2 id="vs-code--devcloud-configuration">VS Code + DevCloud Configuration</h2>
<p>The step-by-step guide to connect to DevCloud using VS Code is available <a href="https://devcloud.intel.com/oneapi/get_started/baseToolkitSamples/">here</a>.</p>
<ol>
<li>Setting up the SSH Config
<ol>
<li>Download the auto config file customized for your account, available on the guide&rsquo;s website.</li>
<li>Open a terminal that supports bash in the location of the downloaded file and execute the following command: <code>bash setup-devcloud-access-XXXXX.txt</code>, where XXXXX is your user&rsquo;s ID.</li>
<li>For safety reasons, remove the downloaded file.</li>
<li>If the bash command was unsuccessful, try out the guide&rsquo;s manual configuration section.</li>
</ol>
</li>
<li>Download VS Code and execute it.</li>
<li>Install the <code>Remote - SSH</code> extension.</li>
<li>Open a terminal inside the program and run the command <code>ssh devcloud</code>.</li>
</ol>
<h2 id="code-compilation-and-running">Code compilation and running</h2>
<h3 id="compilation">Compilation</h3>
<p>Compilation in DevCloud follows almost the same steps a regular C code compilation would, with the difference that the dpcpp compiler must be used, and additional parameters corresponding to openCL and SYCL must be included. An example of a expected compile command would be as follows:</p>
<blockquote>
<p><code>dpcpp &lt;options&gt; &lt;file name&gt; -lOpenCL -lsycl</code></p>
</blockquote>
<h3 id="running-code">Running code</h3>
<p>To run the compiled files, we will use DevCloud&rsquo;s interactive mode. Interactive mode will assign us a compute node, depending on which one is requested. We can request different types of nodes: Multi-core CPU, GPU, FPGA and MPI.</p>
<p>When entering DevCloud, the session will be named after your username and a login, for example: [u84751@login-2]. After requesting a node and being assigned one, the name of your session will change with the ID of the assigned node, for example: [u84751@s001-141]. It is important to note that you must wait for a node to be assigned to you, depending on the availability of the system.</p>
<p>To request a node, we will use the shell command qsub, and we will pass it the parameters -I (uppercase i) and -l (lowercase L), to indicate that we want to request an interactive session and that we want to fully use the node, respectively. Also, we will tell qsub that we want 2 processes per node with :ppn=2. Here are the compute nodes that can be requested along with their commands:</p>
<ol>
<li>
<p>Multi-core CPU</p>
<blockquote>
<p><code>qsub -I -l nodes=1:xeon:ppn=2</code></p>
</blockquote>
</li>
<li>
<p>GPU</p>
<blockquote>
<p><code>qsub -I -l nodes=1:gpu:ppn=2</code></p>
</blockquote>
</li>
<li>
<p>FPGA</p>
<blockquote>
<p><code>qsub -I -l nodes=1:fpga:ppn=2</code></p>
</blockquote>
</li>
<li>
<p>MPI</p>
<p>To run MPI applications in DevCloud, multiple nodes in interactive nodes must be requested using the qsub command. For example, the following command requests two GPU computing nodes:</p>
<blockquote>
<p><code>qsub -I -l nodes=2:gpu:ppn=2 -d .</code></p>
</blockquote>
<p>The following command gets the configurations of all requested nodes:</p>
<blockquote>
<p><code>pbsnodes | grep properties | sort –u</code></p>
</blockquote>
<p>Once all nodes have been asigned, the following command can be used to fetch the nodes' names:</p>
<blockquote>
<p><code>qstat –xf</code></p>
</blockquote>
</li>
</ol>
<p>After requesting a node, the clinfo command can be used to get more information about the assigned node.
For more information about the qsub command and the nodes that can be requested, follow the next <a href="https://devcloud.intel.com/oneapi/documentation/job-submission/">link</a>.</p>

  </div>
</div>

    </main>
    <div class="side-bar">
  
  <p class="mb-1 mt-1 text-left">
  
  <a
    href="/classes/hc/unit2/evaluation/"
    title="Test 2"
  >
    <i class="nav-menu fas fa-chevron-circle-right"></i>
  </a>
  
</p>
<p class="mb-1 mt-1 text-left">
  
  <a
    href="/classes/hc/unit2/dpcpp/"
    title="DPC&#43;&#43;"
  >
    <i class="nav-menu fas fa-chevron-circle-left"></i>
  </a>
  
</p>

  
  <a href="#" class="mb-1 mt-1 text-left">
    <i
      class="nav-menu fas fa-chevron-circle-up"
      aria-label="Scroll to top"
    ></i>
  </a>
  <p class="mb-1 mt-1 text-left">
    <i
      title="Copy URL to share"
      class="nav-menu fas fa-share-alt"
    ></i>
  </p>
</div>

<script>
  function displayCopyMessage(bool) {
    let alertMessage = "";
    if (bool) {
      alertMessage = "Link copied to clipboard";
    } else {
      alertMessage = "Link could not be copied to clipboard";
    }
    let copiedMessage = document.createElement("div");
    copiedMessage.id = "copiedMessage";
    copiedMessage.textContent = alertMessage;
    copiedMessage.classList.add(
      "bg-warning",
      "shadow",
      "d-block",
      "text-center"
    );
    document.body.appendChild(copiedMessage);

    setTimeout(function() {
      copiedMessage.style.opacity = 0;
    }, 500);
    setTimeout(function() {
      document.body.removeChild(copiedMessage);
    }, 1500);
  }

  let clipboard = new ClipboardJS(".fa-share-alt", {
    text: function() {
      return "https:\/\/jfuentes.github.io\/classes\/hc\/unit2\/devcloud\/";
    }
  });

  clipboard.on("success", function() {
    displayCopyMessage(true);
  });

  clipboard.on("error", function() {
    displayCopyMessage(false);
  });
</script>

    <footer class="d-flex flex-row flex-wrap justify-content-between">
  <div class="d-flex flex-column">
    <span class="mb-1">
      Universidad del Bío-Bío, Chile
      &middot;
      2021
    </span>
  </div>

    <div class="row">
      <div class="column" style="
      width: 100%;">Sponsors:</div>
      <div class="column" style="
      width: 120px;
      margin-left: 65px;"><img src="http://www.face.ubiobio.cl/~jfuentes/classes/hc/images/ici_web.png" height="40%" ></div>
      <div class="column" style="
      width: 120px;
      margin-left: 10px;"><img src="http://www.face.ubiobio.cl/~jfuentes/classes/hc/images/intel_web.png" height="20%" ></div>
    </div> 

  </footer>

  </body>
</html>
